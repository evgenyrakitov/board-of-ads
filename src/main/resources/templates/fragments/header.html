<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <div th:fragment="links">
        <meta charset="UTF-8"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">

        <!-- COmmon styles  -->
        <!--        необходимо заменить на локальные версии шрифтов -->
        <link href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--        -->
        <link href="webjars/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
        <link href="../static/css/normalize.css" rel="stylesheet"
              th:href="@{/css/normalize.css}" type="text/css"/>
        <link href="../static/css/header-styles.css" rel="stylesheet"
              th:href="@{/css/header-styles.css}" type="text/css"/>
        <link href="../static/css/media/header-media.css" rel="stylesheet"
              th:href="@{/css/media/header-media.css}" type="text/css"/>
        <link href="../static/favicon.ico" id="favicon" rel="shortcut icon" th:href="@{favicon.ico}"
              type="image/x-icon"/>
        <link href="../static/css/modal_reg.css" rel="stylesheet" th:href="@{/css/modal_reg.css}">
    </div>
</head>
<body>

<header th:fragment="header">
    <div id="userInPage" th:object="${user}"></div>
    <div class="min_header">
        <div id="menuToggle">
            <input type="checkbox"/>
            <span id="span1"></span>
            <span id="span2"></span>
            <span id="span3"></span>
        </div>
        <div class="logo_min">
            <img alt="" src="images/header/logo.png">
        </div>
    </div>
    <div class="bg_black_header"></div>
    <div class=" header-container bg-light nav_first" th:fragment="top-nav-bar">
        <nav class="navbar navbar-expand-sm navbar-light header-element">
            <div class="d-flex justify-content-between align-items-center">
                <ul class="navbar-nav mr-auto" id="avitoNavigation">
                    <li class="nav-item"><a class="nav-link" href="/" th:text="#{header.ads}">Объявления</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="/" th:text="#{header.shops}">Магазины</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="/" th:text="#{header.business}">Бизнес</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="/" th:text="#{header.help}">Помощь</a></li>
                    <div sec:authorize="hasAuthority('ADMIN')">
                        <li class="nav-item"><a class="nav-link" href="/admin_page" th:text="#{header.admin}">Админ</a>
                        </li>
                    </div>
                </ul>
                <ul class="navbar-nav sign_up">
                    <li class="nav-item">
                        <a class="nav-link" href="/profile#favorites">
                            <span class="favourites"></span>
                            <svg class="feather feather-heart" fill="none" height="24" stroke="currentColor"
                                 stroke-linecap="round"
                                 stroke-linejoin="round" stroke-width="2" th:title="Избранное" viewBox="0 0 24 24"
                                 width="24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                            </svg>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span class="message_box">
                                <span class="message_icon">
                                    <svg fill="none" height="24" stroke="currentColor"
                                         stroke-linecap="round" stroke-linejoin="round"
                                         stroke-width="2" viewBox="0 0 24 24" width="24"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
                                    </svg>
                                </span>
                                <span class="message_count"
                                      th:if="${user.getClass().getSimpleName() == 'User'}">
                                    <span hidden="hidden" id="userId"
                                          th:text="${user.getId()}"></span>
                                </span>
                            </span>
                        </a>
                    </li>
                    <li class="nav-item" id="li" th:if="${user.getClass().getSimpleName() == 'String'}">
                        <a class="nav-link text-primary open-modal-1" href="#" style="white-space: nowrap"
                           th:text="#{header.login_and_register}">Вход и регистрация</a>
                    </li>
                    <li class="nav-item" style="margin-right: 10px;"
                        th:if="${user.getClass().getSimpleName() == 'User'}">
                        <div class="dropdown">
                            <button class="dropbtn" th:text="${user.getFirstName()}"></button>
                            <div class='dropdown-content'>
                                <div class="profile-sidebar-head-rating-36hRS">
                                    <a class="link-link-39EVK link-design-default-2sPEv link-novisited-1w4JY profile-sidebar-head-link-1gPfv"
                                       href="#rating" id="navlink-my-rating" target="_self">
                                        <div class="profile-sidebar-head-rating-line-rwmxI">
                                <span class="profile-sidebar-head-score-3OTF5">
                                    <span class="text-text-1PdBw text-size-l-2gTpu text-bold-3R9dt">0,0</span>
                                </span>
                                            <span class="profile-sidebar-head-stars-2Pz_F" th:text="#{menu.autorized.no_reviews}">
                                </span>
                                        </div>
                                    </a></div>
                                <a href="/profile#postings" th:text="#{menu.autorized.my_announcements}"/>
                                <a href="/profile#feedbacks" th:text="#{menu.autorized.my_feedback}"/>
                                <a href="/profile#favorites" th:text="#{menu.autorized.favorites}"/>
                                <a href="/profile#messages" th:text="#{menu.autorized.messages}"/>
                                <a href="/profile#notifications" th:text="#{menu.autorized.notifications}"/>
                                <a href="/profile#wallet" th:text="#{menu.autorized.wallet}"/>
                                <a href="/profile#paid_services" th:text="#{menu.autorized.paid_services}"/>
                                <a href="/profile#settings" th:text="#{menu.autorized.settings}"/>
                                <a href="/logout" th:text="#{menu.autorized.log_off}"/>
                            </div>
                        </div>
                        <!--<a class="nav-link text-primary" href="/logout" style="white-space: nowrap">Выйти</a>-->
                    </li>
                    <li class="nav-item d-flex justify-content-lg-center align-items-center">
                        <a class="btn btn-primary" href="/addNewPosting" th:text="#{header.post_a_ad}">Подать
                            объявления</a>
                    </li>
                </ul>
            </div>
            <div class="locale">
                <div class="dropdown">
                    <button aria-expanded="false" aria-haspopup="true" class=" dropdown-toggle"
                            data-toggle="dropdown" id="dropdownMenu2" type="button">
                        <!--                        <img src="images/header/ru.svg" width="30">-->
                    </button>
                    <div aria-labelledby="dropdownMenu2" class="dropdown-menu">
                        <button class="dropdown-item locale_ru" type="button">
                            <a href="?locale=ru">
                                <img src="images/header/ru.svg" width="30">
                            </a>
                        </button>
                        <button class="dropdown-item locale_en" type="button">
                            <a href="?locale=en">
                                <img src="images/header/en.svg" width="30">
                            </a>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </div>
    <div class=" header-container nav_second">
        <nav class="navbar navbar-expand-sm navbar-light bg-white header-element ">
            <div class="d-flex justify-content-between align-items-center">
                <div class="logo">
                    <a href="/">
                        <img alt="" src="images/header/logo.png">
                    </a>
                </div>
                <ul class="navbar-nav mr-auto category_link" id="header_category_list">

                </ul>
            </div>
        </nav>
    </div>
    <div class=" header-container search">
        <form class=" header-element">
            <div class="form-row justify-content-center">
                <select class="form-control col-8 col-sm-8  col-md-3 col-lg-2" id="findFromCategory">
                    <option selected th:text="#{header.any_category}" value>Любая категория</option>
                </select>
                <div class="form-group col-8 col-sm-8  col-md-5 col-lg-8">
                    <input class="form-control" placeholder="Поиск по объвлениям"
                           th:placeholder="#{header.search_by_announcements}"
                           type="text">
                </div>
                <select class="form-control col-8 col-sm-8  col-md-2 col-lg-1" id="location">
                    <option data="city-1400" id="location-name" selected>Москва</option>
                </select>
                <div class="col-8 col-sm-8 col-md-2 col-lg-1">
                    <button class="btn btn-light" th:text="#{header.search}" type="button">Найти</button>
                </div>
            </div>
            <div class="form-row justify-content-center">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" id="inlineCheckbox1" type="checkbox" value="option1">
                    <label class="form-check-label" for="inlineCheckbox1"
                           th:text="#{header.only_in_titles}">только в названиях</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" id="inlineCheckbox2" type="checkbox" value="option2">
                    <label class="form-check-label" for="inlineCheckbox2"
                           th:text="#{header.only_with_photos}">только с фото</label>
                </div>
            </div>
        </form>
    </div>
    <a class="btn btn-primary open_search" href="#">Поиск</a>

</header>
<div th:fragment="modals">
    <div class="modal" id="locationModal" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" th:text="#{header.location.modalHeader}">Город или регион</h5>
                    <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">
                    <form role="form">
                        <div class="form-group padding">
                            <input autocomplete="off" class="form-control" id="location-search" type="text">
                            <div class="list-group text-left" id="location-list">

                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" data-dismiss="modal" id="location-close"
                            th:text="#{header.location.modalFooter}"
                            type="button">Показать объявления
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="modal-reg-1">
        <div class="modal-dialog modal-dialog-centered">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="close" data-dismiss="modal" type="button">
                        <div class="leftright"></div>
                        <div class="rightleft"></div>
                    </div>

                    <form action="/login" class="" id="formLogin" method="post"
                          style="align-content: center">
                        <div class="form-title font-weight-bolder"
                             th:text="#{header.modal.login.login}">Вход
                        </div>
                        <div class="form-item">
                            <div class="form-item-login">
                                <label class="input-login">
                                    <input class="form-control" id="frmLoginInputEmail" name="email"
                                           placeholder="Электронная почта"
                                           th:placeholder="#{header.modal.placeholder.email}"
                                           type="email">
                                </label>
                            </div>
                            <div class="form-item-password">
                                <label class="input-password">
                                    <input autocomplete="off" class="form-control"
                                           id="frmLoginInputPassword"
                                           name="password"
                                           placeholder="Пароль"
                                           th:placeholder="#{header.modal.placeholder.password}"
                                           type="password">
                                </label>
                            </div>

                            <div class="form-password-items-container">
                                <div class="form-item-radio-remember">
                                    <label class="checkbox"
                                           style="vertical-align: middle; font-size: 10pt">
                                        <input checked="" class="" name="remember" type="checkbox">
                                        <span th:text="#{header.modal.login.rememberPassword}">Запомнить пароль</span>
                                    </label>
                                </div>
                                <a data-dismiss="modal" href="#" id="open-modal-3"
                                   style="font-size: 10pt"
                                   th:text="#{reset_password.message.reset_password}">Забыли
                                    пароль?</a>
                            </div>
                            <div class="form-password-items-container">
                <span id="spanIncorrectLoginPass" style="color: red;"
                      th:text="#{login.error_message}">Не верная комбинация логина и пароля</span>
                            </div>
                            <div class="form-item-button">
                                <button class="btn btn-primary" id="btnLogin" name="submit"
                                        type="button">
                                    <span th:text="#{header.modal.login.signIn}">Войти</span>
                                </button>
                            </div>
                        </div>
                    </form>

                    <span style="padding: 10px 0" th:text="#{header.modal.login.orSignInWith}">или продолжить через</span>
                    <div class="social">
                            <span class="social-vk">
                                <a href="/login/vk/auth"><img src="/images/vk.svg"></a>
                            </span>
                        <span class="social-ok">
                                <img src="/images/ok.svg">
                            </span>
                        <span class="social-fb">
                                  <a href="/login/google"><img src="/images/google.svg"></a>
                            </span>
                    </div>
                </div>

                <div class="modal-footer">
                    <a class="text-center" data-dismiss="modal" href="#" id="open-modal-2"
                       style="margin: auto" th:text="#{header.modal.login.register}">Зарегистрироваться</a>
                    <div class="auth-app-doc" style="font-size: 13px; color: #858585">
                        <span th:text="#{header.modal.login.userAgreementP1}">При входе вы подтверждаете согласие с</span>
                        <a href="#">
              <span
                  th:text="#{header.modal.login.userAgreementP2}">условиями использования Авито</span>
                        </a>
                        <a href="#">
                            <span th:text="#{header.modal.login.userAgreementP3}">и политикой о&nbsp;данных пользователей.</span>
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Registration Modal -->
    <div class="modal" id="modal-reg-2" role="dialog">
        <div class="modal-dialog modal-dialog-centered">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="close" data-dismiss="modal" type="button">
                        <div class="leftright"></div>
                        <div class="rightleft"></div>
                    </div>

                    <form action="/rest/admin/add" id="add-reg-form">
                        <div class="form-title font-weight-bolder"
                             th:text="#{header.modal.registration}">Регистрация
                        </div>
                        <div class="form-item-login">
                            <label class="input-login">
                                <input class="form-control" id="login-reg-form"
                                       name="email"
                                       placeholder="Введите электронную почту" required
                                       th:placeholder="#{header.modal.placeholder.email}"
                                       type="email">
                            </label>
                        </div>

                        <div class="form-item-password">
                            <label class="input-password">
                                <input autocomplete="off" class="form-control"
                                       id="password-reg-form"
                                       name="password" th:placeholder="#{header.modal.placeholder.password}" type="password">
                            </label>
                        </div>

                        <div class="form-item-password">
                            <label class="input-password">
                                <input autocomplete="off" class="form-control"
                                       id="password_confirm-reg-form" name="password_confirm"
                                       placeholder="Повторите пароль"
                                       th:placeholder="#{header.modal.placeholder.passwordConfirm}" type="password">
                            </label>
                        </div>

                        <div class="form-item-publicName">
                            <label class="input-publicName">
                                <input class="form-control" id="first_name-reg-form"
                                       name="firstName"
                                       placeholder="Ваше Имя" required th:placeholder="#{header.modal.placeholder.yourFirstName}"
                                       type="text">
                            </label>
                        </div>

                        <div class="form-item-publicName">
                            <label class="input-publicName">
                                <input name="lastName" class="form-control"
                                       th:placeholder="#{header.modal.placeholder.yourLastName}"
                                       placeholder="Ваше Имя" type="text" id="last_name-reg-form" required>
                            </label>
                        </div>

                        <div class="form-item-region" id="regionId">
                            <select class="custom-select" id="region">
                                <option selected disabled hidden>Регион</option>
                                <option th:each="region : ${regions}" th:value="${region.id}" th:label="${region.name}">One</option>
                            </select>
                        </div>

                        <div class="form-item-city" id="citiesId">

                        </div>

                        <div class="form-item-phone">
                            <label class="input-phone">
                                <input class="form-control" id="phone-reg-form"
                                       name="phone"
                                       placeholder="Номер телефона" required th:placeholder="#{header.modal.placeholder.phoneNumber}"
                                       type="tel">
                            </label>
                        </div>
                        <div class="form-reg-button">
                            <button class="btn btn-primary" id="btn-reg" name="submit"
                                    type="submit">
                                <span th:text="#{header.modal.register}">Зарегистрироваться</span>
                            </button>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <span class="text-center"
                          th:text="#{header.modal.register.hasAccount}">У вас уже есть учётная запись?</span><span><a
                    class="open-modal-1" data-dismiss="modal" href="#"
                    th:text="#{header.modal.login.signIn}">Войти</a></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Restoration Modal -->
    <div class="modal" id="modal-reg-3" role="dialog">
        <div class="modal-dialog modal-dialog-centered">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="close" data-dismiss="modal" type="button">
                        <div class="leftright"></div>
                        <div class="rightleft"></div>
                    </div>

                    <form action="/user/resetPassword" id="form-modal-3">
                        <div class="form-title font-weight-bolder"
                             th:text="#{header.modal.accountRecovery}">
                            Восстановление пароля
                        </div>
                        <div class="form-item-login">
                            <label class="input-login">
                                <input class="form-control" name="email"
                                       placeholder="Электронная почта"
                                       required th:placeholder="#{header.modal.placeholder.email}"
                                       type="email">
                            </label>
                        </div>
                        <div class="form-reg-button">
                            <button class="btn btn-primary" id="btn-modal-3"
                                    name="submit"
                                    type="submit">
                                <span th:text="#{header.modal.submit}">Отправить</span>
                            </button>
                        </div>
                    </form>
                    <div class="form-password-items-container text-center">
                <span id="reset-email-sent-letter-message"
                      th:text="#{header.modal.passwordResetCheckYourEmail}"
                >Проверьте свою электронную почту</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="form-password-items-container text-center">
                <span id="user-not-found-message" style="color: red;"
                      th:text="#{header.modal.userNotFound}"
                >Пользователь не найден</span>
                    </div>
                    <span class="text-center"
                          th:text="#{header.modal.rememberedPassword}">Вспомнили пароль?</span><span><a
                    class="open-modal-1" data-dismiss="modal" href="#"
                    th:text="#{header.modal.login.signIn}">Войти</a></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal" id="modal-pass-change" role="dialog">
        <div class="modal-dialog modal-dialog-centered">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="close" data-dismiss="modal" type="button">
                        <div class="leftright"></div>
                        <div class="rightleft"></div>
                    </div>

                    <form action="/reset/savePassword" id="form-modal-pass-change" method="POST">
                        <div class="form-title font-weight-bolder" th:text="#{header.modal.changePassword}">
                            Смена Пароля
                        </div>
                        <input id="passwordResetToken" name="token" th:value="${passwordToken}" type="hidden">
                        <div class="form-item-password">
                            <label class="input-password">
                                <input autocomplete="off" class="form-control"
                                       id="pass-reset-form-password"
                                       name="password"
                                       placeholder="Новый Пароль" required
                                       th:placeholder="#{header.modal.placeholder.newPassword}"
                                       type="password">
                            </label>
                        </div>
                        <div class="form-item-password">
                            <label class="input-password">
                                <input autocomplete="off" class="form-control"
                                       id="pass-reset-form-passwordConfirm"
                                       name="passwordConfirm"
                                       placeholder="Подтвердите Новый Пароль" required
                                       th:placeholder="#{header.modal.placeholder.confirmNewPassword}"
                                       type="password">
                            </label>
                        </div>
                        <div class="form-reg-button">
                            <button class="btn btn-primary" id="btn-modal-pass-change">
                                <span th:text="#{header.modal.savePassword}">Сохранить Пароль</span>
                            </button>
                        </div>
                        <div class="form-password-items-container text-center">
                <span id="pass-reset-not-equal-passwords-message" style="color: red;"
                      th:text="#{header.modal.reset.unequalPasswords}"
                >Введённые пароли не совпадают</span>
                        </div>
                        <div class="form-password-items-container text-center">
                <span id="pass-reset-weak-password-message" style="color: red;"
                      th:text="#{header.modal.reset.weakPassword}"
                >Длина пароля должна быть более 4 символо и пароль должен содержать большую латинскую букву, цифру или символ</span>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Password Error Modal -->
    <div class="modal" id="modal-pass-change-error" role="dialog">
        <div class="modal-dialog modal-dialog-centered">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="close" data-dismiss="modal" type="button">
                        <div class="leftright"></div>
                        <div class="rightleft"></div>
                    </div>
                    <div>
                        <h3 class="font-weight-bolder form-title" id="passwordResetErrorMessage"
                            th:text="${passwordResetErrorMessage}">Ошибка</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:fragment="script">
    <script src="webjars/jquery/3.5.1/jquery.min.js"></script>
    <script src="webjars/popper.js/1.16.0/popper.min.js" type="module"></script>
    <script src="webjars/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="../static/js/header.js" th:src="@{/js/header.js}" type="module"></script>
    <script src="/js/modal_registation.js" th:src="@{/js/modal_registation.js}" type="module"></script>
    <script src="/js/modal_registation.js" th:src="@{/js/modal_location.js}"></script>
    <script src="/js/modal_registation.js" th:src="@{/js/registration.js}" type="module"></script>
</div>
</body>
</html>
